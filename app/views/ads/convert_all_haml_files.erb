cmd = "find ~/Downloads/ -iname \'*.haml\'"
output = `#{cmd}` 
output = output.split("\n")

output.each do |file| 

  f = File.open("#{file}", "rb")
  contents = f.read
  f.close 
  erb = file.split('/')[0..(file.split('/').index(file.split('/').last) - 1)]
  name = file.split('/').last 
  erb << name.gsub("haml","erb")
  begin 
    File.open("#{erb.join("/")}","w"){|f| f.write(Haml2Erb.convert(contents))}
  rescue Exception => e
    p e.message
  end
end
